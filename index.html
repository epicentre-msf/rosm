<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ROSM by paleolimbot</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>ROSM</h1>
        <p>Plot Open Street Map and Other Tiles in R</p>

        <p class="view"><a href="https://github.com/paleolimbot/rosm">View the Project on GitHub <small>paleolimbot/rosm</small></a></p>


        <ul>
          <li><a href="https://github.com/paleolimbot/rosm/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/paleolimbot/rosm/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/paleolimbot/rosm">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="rosm-open-street-map-tiles-in-r" class="anchor" href="#rosm-open-street-map-tiles-in-r" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ROSM: Open Street Map tiles in R</h1>

<p><a href="https://cran.r-project.org/package=rosm"><img src="http://cranlogs.r-pkg.org/badges/rosm" alt=""></a></p>

<p>Download and plot <a href="http://www.openstreetmap.org/">Open Street Map</a>, <a href="http://www.mapquest.com/">Mapquest</a>, <a href="http://www.bing.com/maps">Bing Maps</a> and other tiled map sources in a way that works seamlessly with plotting from the 'sp' package. Use to create high-resolution basemaps and add hillshade to vector based maps.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>The {rosm} package is <a href="https://cran.r-project.org/package=rosm">available on CRAN</a>, and can be installed using <code>install.packages("rosm")</code>.</p>

<h2>
<a id="using-rosm-to-plot-basemaps" class="anchor" href="#using-rosm-to-plot-basemaps" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using {rosm} to plot basemaps</h2>

<p>The {rosm} package pulls <a href="https://www.bing.com/maps/">Bing Maps</a>, <a href="https://www.openstreetmap.org/">Open Street Map</a>, and <a href="http://wiki.openstreetmap.org/wiki/Tile_servers">related maps</a> from the internet, caches them locally, and renders them to provide context to overlying data (your sample sites, etc.). For details, take a look at the <a href="https://cran.r-project.org/web/packages/rosm/rosm.pdf">{rosm} manual</a>. First we'll load the packages (we'll also be using the <a href="http://paleolimbot.github.io/prettymapr">prettymapr</a> package to help us with bounding boxes and plotting.)</p>

<div class="highlight highlight-source-r"><pre>library(<span class="pl-smi">rosm</span>)
library(<span class="pl-smi">prettymapr</span>)</pre></div>

<h3>
<a id="step-1-find-your-bounding-box" class="anchor" href="#step-1-find-your-bounding-box" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 1: Find your bounding box</h3>

<p>The {rosm} package plots based on a <strong>bounding box</strong>, or an area that you would like to be visible. There's a few ways to go about doing this, but the easiest way is to visit the <a href="http://www.openstreetmap.org/export">Open Street Maps Export page</a>, zoom to your area of interest, and copy/paste the values into <code>makebbox(northlat, eastlon, southlat, westlon)</code> from the {prettymapr} package. You can also use <code>searchbbox("my location name")</code>, also from the {prettymapr} package, which will query google for an appropriate bounding box. You'll notice that the bounding box returned by these methods is just a 2x2 matrix, the same as that returned by <code>bbox()</code> in the {sp} package.</p>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">altalake</span> <span class="pl-k">&lt;-</span> searchbbox(<span class="pl-s"><span class="pl-pds">"</span>alta lake, BC<span class="pl-pds">"</span></span>)
<span class="pl-c"># or</span>
<span class="pl-smi">altalake</span> <span class="pl-k">&lt;-</span> makebbox(<span class="pl-c1">50.1232</span>, <span class="pl-k">-</span><span class="pl-c1">122.9574</span>, <span class="pl-c1">50.1035</span>, <span class="pl-k">-</span><span class="pl-c1">123.0042</span>)</pre></div>

<p>Make sure you've got your bounding box right by trying <code>osm.plot()</code> or <code>bmaps.plot()</code> with the bounding box as your first argument.</p>

<div class="highlight highlight-source-r"><pre>osm.plot(<span class="pl-smi">altalake</span>)</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-3-1.png" alt=""></p>

<div class="highlight highlight-source-r"><pre>bmaps.plot(<span class="pl-smi">altalake</span>)</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-4-1.png" alt=""></p>

<h3>
<a id="step-2-choose-your-map-type-and-zoom-level" class="anchor" href="#step-2-choose-your-map-type-and-zoom-level" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 2: Choose your map type and zoom level</h3>

<p>{rosm} provides access to a number of map types (and even the ability to load your own if you're savvy!), but the most common ones you'll use are <code>type=osm</code>, <code>type="hillshade"</code>, <code>type=stamenwatercolor</code>, and <code>type=stamenbw</code> for <code>osm.plot()</code> and <code>type="Aerial"</code> with <code>bmaps.plot()</code>. Look at all of them with <code>osm.types()</code> and <code>bmaps.types()</code>.</p>

<div class="highlight highlight-source-r"><pre>osm.types()</pre></div>

<pre><code>##  [1] "hikebike"               "hillshade"             
##  [3] "hotstyle"               "lovinacycle"           
##  [5] "lovinahike"             "mapquestosm"           
##  [7] "mapquestsat"            "opencycle"             
##  [9] "openpiste"              "osm"                   
## [11] "osmgrayscale"           "osmtransport"          
## [13] "stamenbw"               "stamenwatercolor"      
## [15] "thunderforestlandscape" "thunderforestoutdoors"
</code></pre>

<div class="highlight highlight-source-r"><pre>osm.plot(<span class="pl-smi">altalake</span>, <span class="pl-v">type</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>stamenbw<span class="pl-pds">"</span></span>)</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-5-1.png" alt=""></p>

<div class="highlight highlight-source-r"><pre>bmaps.types()</pre></div>

<pre><code>## [1] "Aerial"           "AerialWithLabels" "Road"
</code></pre>

<div class="highlight highlight-source-r"><pre>bmaps.plot(<span class="pl-smi">altalake</span>, <span class="pl-v">type</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>AerialWithLabels<span class="pl-pds">"</span></span>)</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-6-1.png" alt=""></p>

<p>The next thing we'll adjust is the zoom level. The zoom level (level of detail) is calculated automatically, but it may be that you're looking for higher (or lower) resolution. To specify a resolution specifically, use <code>res=300</code> (where 300 is the resolution in dpi; useful when exporting figures), or <code>zoomin=1</code>, which will use the automatically specified zoom level and zoom in 1 more.</p>

<div class="highlight highlight-source-r"><pre>bmaps.plot(<span class="pl-smi">altalake</span>, <span class="pl-v">zoomin</span><span class="pl-k">=</span><span class="pl-c1">1</span>) <span class="pl-c"># res=300 will also work</span></pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-7-1.png" alt=""></p>

<h3>
<a id="step-3-add-overlays" class="anchor" href="#step-3-add-overlays" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 3: Add overlays</h3>

<p>Next we'll use the <code>lines()</code>, <code>polygon()</code>, <code>arrows()</code>, and <code>text()</code> functions to draw on top of the map we've just plotted. What's important here is that we specifically have to tell {rosm} that we don't want it to project our data (if you plot with <code>axes=TRUE</code> you'll see that <code>osm.plot()</code> is not plotting in lat/lon. It's plotting in EPSG:3857...which you don't need to understand but may be useful if you do happen to understand it). This sounds intimidating but it's actually very easy. For larger areas this may lead to your points not lining up, but there are the <code>osm.lines()</code>, <code>osm.points()</code>, and <code>osm.polygon()</code> functions that will automatically project your data if this is a problem).</p>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># plot without projecting</span>
osm.plot(<span class="pl-smi">altalake</span>, <span class="pl-v">project</span><span class="pl-k">=</span><span class="pl-c1">FALSE</span>)
points(c(<span class="pl-k">-</span><span class="pl-c1">122.9841</span>, <span class="pl-k">-</span><span class="pl-c1">122.9812</span>), c(<span class="pl-c1">50.11055</span>, <span class="pl-c1">50.11765</span>), 
       <span class="pl-v">pch</span><span class="pl-k">=</span><span class="pl-c1">15</span>, <span class="pl-v">cex</span><span class="pl-k">=</span><span class="pl-c1">0.6</span>)
text(c(<span class="pl-k">-</span><span class="pl-c1">122.9841</span>, <span class="pl-k">-</span><span class="pl-c1">122.9812</span>), c(<span class="pl-c1">50.11055</span>, <span class="pl-c1">50.11765</span>), 
     <span class="pl-v">labels</span><span class="pl-k">=</span>c(<span class="pl-s"><span class="pl-pds">"</span>GC6<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>GC2<span class="pl-pds">"</span></span>), <span class="pl-v">adj</span><span class="pl-k">=</span>c(<span class="pl-k">-</span><span class="pl-c1">0.2</span>, <span class="pl-c1">0.5</span>), <span class="pl-v">cex</span><span class="pl-k">=</span><span class="pl-c1">0.5</span>)</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-8-1.png" alt=""></p>

<h3>
<a id="step-4-putting-it-all-together" class="anchor" href="#step-4-putting-it-all-together" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 4: Putting it all together</h3>

<p>Putting it all together, an example plotting script might like this (we're going to use the <code>prettymap()</code> function to set the margins and add our scale bar).</p>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">altalake</span> <span class="pl-k">&lt;-</span> makebbox(<span class="pl-c1">50.1232</span>, <span class="pl-k">-</span><span class="pl-c1">122.9574</span>, <span class="pl-c1">50.1035</span>, <span class="pl-k">-</span><span class="pl-c1">123.0042</span>)
prettymap({
  bmaps.plot(<span class="pl-smi">altalake</span>, <span class="pl-v">res</span><span class="pl-k">=</span><span class="pl-c1">300</span>, <span class="pl-v">project</span><span class="pl-k">=</span><span class="pl-c1">FALSE</span>, <span class="pl-v">stoponlargerequest</span><span class="pl-k">=</span><span class="pl-c1">FALSE</span>)
  points(c(<span class="pl-k">-</span><span class="pl-c1">122.9841</span>, <span class="pl-k">-</span><span class="pl-c1">122.9812</span>), c(<span class="pl-c1">50.11055</span>, <span class="pl-c1">50.11765</span>), 
         <span class="pl-v">pch</span><span class="pl-k">=</span><span class="pl-c1">15</span>, <span class="pl-v">cex</span><span class="pl-k">=</span><span class="pl-c1">0.6</span>)
  text(c(<span class="pl-k">-</span><span class="pl-c1">122.9841</span>, <span class="pl-k">-</span><span class="pl-c1">122.9812</span>), c(<span class="pl-c1">50.11055</span>, <span class="pl-c1">50.11765</span>), 
       <span class="pl-v">labels</span><span class="pl-k">=</span>c(<span class="pl-s"><span class="pl-pds">"</span>GC6<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>GC2<span class="pl-pds">"</span></span>), <span class="pl-v">adj</span><span class="pl-k">=</span>c(<span class="pl-k">-</span><span class="pl-c1">0.2</span>, <span class="pl-c1">0.5</span>), <span class="pl-v">cex</span><span class="pl-k">=</span><span class="pl-c1">0.5</span>)
  })</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-9-1.png" alt=""></p>

<p>There's tons of options for <code>prettymap()</code> that let you customize the north arrow, scale bar etc., which you can find in the <a href="https://cran.r-project.org/web/packages/prettymapr/prettymapr.pdf">{prettymapr} manual</a>.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/paleolimbot">paleolimbot</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-73397650-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
